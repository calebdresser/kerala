# Caleb Dresser MD
# BIDMC / HSPH / FXB

###
### LETS CLEAN UP THE RAINFALL TREND DATA

#import the rainfall data (hand-coded from 0 to 5 based on indian meteorological service rainmap JPG files)
rain2019 <- read.csv(file = file.choose(),  header = TRUE)

# add a column that is raingall in centimeters, based on 
# the minimum cutoff value for each category on the IMS maps
rain2019$RainCM <- with(rain2019, ifelse (Rainfall == 0, 0,
ifelse (Rainfall == 1, 0.1, 
ifelse (Rainfall == 2, 2.5,
ifelse (Rainfall == 3, 15.6,
ifelse (Rainfall == 4, 64.5,
ifelse (Rainfall == 5, 115.6, 0)))))))

# look at the data
head(rain2019)

#plot rainfall by day, color code districts
# variety of visualization options in ggplot2
raintrendsjitter2019 <- ggplot(data=rain2019, aes (x = DayAug, y = RainCM)) + geom_jitter(aes(color=Location))
raintrendsjitter2019

raintrendsjitter2019 <- ggplot(data=rain2019, aes (x = DayAug, y = RainCM)) + geom_jitter(aes(color=Location))
raintrendsline2019

raintrendssmooth2019 <- ggplot(data=rain2019, aes (x = DayAug, y = RainCM)) + geom_line(aes(color=Location))
raintrendssmooth2019

# Now lets export the data to a CSV file so we can get 
# district level totals into our other file (by district)
write.csv(rain2019, file = "2019 Rainfall in Centimeters.csv")
